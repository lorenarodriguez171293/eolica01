<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matriz Energ√©tica y Simuladores de Argentina</title>
    <style>
        /* --- Estilos generales y cambio de fondo a negro --- */
        :root{
            --primary:#1a5c92;
            --accent:#007bff;
            --card:#0f1720;
            --muted:#9aa6b2;
            --glass: rgba(255,255,255,0.04);
        }
        body { 
            font-family: 'Arial', sans-serif; 
            margin: 0; padding: 0; 
            background-color: #000; /* fondo negro solicitado */
            color: #e6eef7; 
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }
        header { 
            background-color: var(--primary); 
            color: white; 
            padding: 25px 0; 
            text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.7);
        }
        h1 { margin: 0; font-size: 2.2em; }
        .container { width: 95%; max-width: 1100px; margin: 30px auto; }

        /* --- Secciones de contenido --- */
        .content-section { 
            display: none; 
            padding: 30px; 
            border: 1px solid rgba(255,255,255,0.04);
            background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            margin-bottom: 20px; 
            border-radius: 10px; 
            box-shadow: 0 0 20px rgba(0,0,0,0.6);
        }
        .content-section.active { display: block; }

        /* --- Botones de navegaci√≥n --- */
        .nav-buttons button, .back-button { 
            background-color: var(--accent); 
            color: white; 
            border: none; 
            padding: 12px 20px; 
            margin: 8px 5px; 
            cursor: pointer; 
            border-radius: 6px; 
            font-size: 1em;
            transition: background-color 0.25s, transform 0.08s;
        }
        .nav-buttons button:hover, .back-button:hover { background-color: #0056b3; transform: translateY(-2px); }
        .back-button { background-color: #6c757d !important; margin-bottom: 20px; }

        /* --- Matriz energ√©tica (estilos originales preservados, con contraste) --- */
        .data-list { list-style: none; padding: 0; margin-top: 20px; }
        .data-item { padding: 10px 0; border-bottom: 1px dashed rgba(255,255,255,0.06); }
        .data-item:last-child { border-bottom: none; }
        .source-name { font-weight: bold; color: var(--primary); margin-bottom: 5px; display: block; }
        .percentage { 
            background-color: #3498db; 
            color: white; 
            padding: 3px 8px; 
            border-radius: 3px; 
            font-size: 0.9em; 
            display: inline-block;
        }
        .progress-bar-container { height: 25px; background-color: rgba(255,255,255,0.03); border-radius: 4px; margin-top: 5px; overflow: hidden; }
        .progress-bar { height: 100%; border-radius: 4px 0 0 4px; transition: width 0.5s ease; float: left;}

        .gas { background-color: #e67e22; } 
        .oil { background-color: #34495e; } 
        .hydro { background-color: #2980b9; } 
        .nuclear { background-color: #27ae60; } 
        .renewable { background-color: #f1c40f; } 

        /* --- Simuladores: contenedores --- */
        .simulator-area { 
            background-color: rgba(255,255,255,0.02); 
            padding: 20px; 
            margin-top: 20px; 
            border: 1px dashed rgba(255,255,255,0.04); 
            border-radius: 8px; 
            min-height: 180px;
        }
        .simulator-row { display:flex; gap:20px; flex-wrap:wrap; align-items:flex-start; }
        .simulator-svg { flex: 0 0 380px; max-width: 100%; }
        .simulator-controls { flex: 1; min-width: 220px; }

        .simulator-control { 
            margin-bottom: 12px; 
            width: 100%; 
            text-align: left;
            padding: 10px;
            background-color: rgba(255,255,255,0.02);
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.03);
        }
        label { display:block; font-weight:700; margin-bottom:6px; color:var(--muted); font-size:0.95rem;}
        input[type="range"], input[type="number"], button.select-btn {
            width:100%;
            padding:8px;
            border-radius:6px;
            border:1px solid rgba(255,255,255,0.06);
            background:transparent;
            color:var(--muted);
            margin-bottom:6px;
        }
        input[type="number"] { padding:8px; color: #e6eef7; background: rgba(255,255,255,0.015); }

        .simulator-output { 
            font-size: 1.05em; 
            font-weight: bold; 
            color: #e6eef7; 
            margin-top: 8px;
            padding: 10px;
            border: 1px solid rgba(255,255,255,0.04);
            border-radius: 6px;
            background-color: rgba(0,0,0,0.4);
        }

        .visual-representation {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: white;
            transition: all 0.5s ease-in-out;
            margin-top: 10px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.7);
        }

        /* Responsive */
        @media (max-width:900px){
            .simulator-row { flex-direction: column; }
            .simulator-svg { order: -1; }
        }

    </style>
</head>
<body>

    <header>
        <h1>Matriz Energ√©tica y Simuladores de Argentina üá¶üá∑</h1>
    </header>

    <div class="container">

        <!-- --- SECCI√ìN PRINCIPAL: MATRIZ ENERG√âTICA --- -->
        <section id="matriz" class="content-section active">
            <h2>üìä Composici√≥n de la Oferta Interna de Energ√≠a Primaria</h2>
            <p>La matriz energ√©tica de Argentina muestra la dependencia hist√≥rica de los combustibles f√≥siles (Gas y Petr√≥leo), que constituyen m√°s del 80% del total. La participaci√≥n de las fuentes alternativas, impulsadas por la Ley 27.191, crece anualmente y se concentra en la energ√≠a e√≥lica y solar.</p>

            <div class="matriz-viz">
                <h3>Distribuci√≥n por Fuente (Datos Ilustrativos)</h3>
                <ul class="data-list" id="matriz-data-list">
                    <!-- Datos de la matriz se inyectar√°n aqu√≠ con JavaScript -->
                </ul>
            </div>

            <h2 style="margin-top: 24px;">üß™ Acceso a Simuladores de Energ√≠as Alternativas</h2>
            <div class="nav-buttons">
                <button onclick="showSection('hidro');">üíß Hidroel√©ctrica</button>
                <button onclick="showSection('nuclear');">‚öõÔ∏è Nuclear</button>
                <button onclick="showSection('fotovoltaica');">‚òÄÔ∏è Fotovoltaica</button>
                <button onclick="showSection('eolica');">üå¨Ô∏è E√≥lica</button>
                <button onclick="showSection('biocombustibles');">üå± Biocombustibles</button>
            </div>
        </section>

        <!-- --- SECCI√ìN HIDROEL√âCTRICA (complejizada con SVG y controles) --- -->
        <section id="hidro" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üíß Energ√≠a Hidroel√©ctrica</h2>
            <p><strong>Descripci√≥n:</strong> Utiliza el movimiento del agua, generalmente almacenada en represas, para mover turbinas. En Argentina: Yacyret√°, Salto Grande, etc.</p>

            <div class="simulator-area" id="simulador-hidro">
                <div class="simulator-row">
                    <!-- Ilustraci√≥n SVG del embalse con partes -->
                    <div class="simulator-svg" aria-hidden="true">
                        <svg viewBox="0 0 500 300" width="100%" height="100%">
                            <!-- terreno y embalse -->
                            <rect x="0" y="210" width="500" height="90" fill="#0b1220"/>
                            <rect x="20" y="80" width="260" height="140" fill="#1e90ff" rx="8"/>
                            <text x="30" y="95" fill="#e6eef7" font-size="14">Embalse (zona de agua)</text>

                            <!-- presa -->
                            <rect x="280" y="60" width="40" height="160" fill="#666" rx="6"/>
                            <text x="282" y="80" fill="#e6eef7" font-size="12">Presa</text>

                            <!-- compuerta / vertedero -->
                            <rect x="320" y="160" width="40" height="8" fill="#999" />
                            <text x="320" y="150" fill="#e6eef7" font-size="12">Vertedero</text>

                            <!-- tuber√≠a de presi√≥n -->
                            <path d="M320 168 C360 180 400 180 430 200" stroke="#ccc" stroke-width="10" fill="none" stroke-linecap="round"/>
                            <text x="360" y="190" fill="#e6eef7" font-size="12">Tuber√≠a a turbina</text>

                            <!-- turbina y generador -->
                            <g transform="translate(430,190)">
                                <circle cx="0" cy="0" r="26" fill="#ffcc00"/>
                                <rect x="-35" y="-80" width="70" height="40" rx="6" fill="#b23"/>
                                <text x="-28" y="-62" fill="#fff" font-size="12">Generador</text>
                                <text x="-28" y="46" fill="#fff" font-size="12">Turbina</text>
                            </g>

                            <!-- leyendas -->
                            <text x="30" y="250" fill="#9aa6b2" font-size="11">Components: Embalse ‚Ä¢ Presa ‚Ä¢ Tuber√≠a de presi√≥n ‚Ä¢ Turbina ‚Ä¢ Generador</text>
                        </svg>
                    </div>

                    <!-- Controles y c√°lculo -->
                    <div class="simulator-controls">
                        <div class="simulator-control">
                            <label for="embalse-level">Nivel del Embalse (m) ‚Äî altura efectiva (h)</label>
                            <input type="range" id="embalse-level" min="10" max="150" value="75" oninput="onHydroInput()" />
                            <div style="display:flex; gap:8px; margin-top:6px;">
                                <input type="number" id="embalse-level-num" value="75" min="10" max="150" />
                                <button class="select-btn" onclick="setHydroPreset(30)">Lluvia baja</button>
                                <button class="select-btn" onclick="setHydroPreset(100)">Nivel alto</button>
                            </div>
                        </div>

                        <div class="simulator-control">
                            <label for="caudal">Caudal (Q) m¬≥/s</label>
                            <input type="range" id="hydro-caudal" min="10" max="2000" value="200" oninput="onHydroInput()" />
                            <input type="number" id="hydro-caudal-num" value="200" />
                        </div>

                        <div class="simulator-control">
                            <label for="hydro-eff">Eficiencia total (%)</label>
                            <input type="range" id="hydro-eff" min="30" max="95" value="85" oninput="onHydroInput()" />
                            <input type="number" id="hydro-eff-num" value="85" />
                        </div>

                        <div class="simulator-output" id="hydro-output">
                            Potencia: 0 MW ‚Äî Nota: c√°lculo basado en P = œÅ g Q h Œ∑ (œÅ=1000 kg/m¬≥)
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN NUCLEAR (complejizada) --- -->
        <section id="nuclear" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>‚öõÔ∏è Energ√≠a Nuclear</h2>
            <p><strong>Descripci√≥n:</strong> Fisi√≥n controlada del uranio que calienta agua en un circuito primario, genera vapor en generadores de vapor y mueve turbinas.</p>

            <div class="simulator-area" id="simulador-nuclear">
                <div class="simulator-row">
                    <div class="simulator-svg" aria-hidden="true">
                        <svg viewBox="0 0 500 300" width="100%" height="100%">
                            <!-- Reactor -->
                            <rect x="40" y="60" width="140" height="180" fill="#2e2e2e" rx="8"/>
                            <text x="60" y="85" fill="#e6eef7">Reactor (n√∫cleo)</text>

                            <!-- barras de control -->
                            <g transform="translate(70,110)">
                                <rect x="0" y="0" width="12" height="80" fill="#222"/>
                                <rect x="30" y="0" width="12" height="60" fill="#222"/>
                                <rect x="60" y="0" width="12" height="40" fill="#222"/>
                            </g>
                            <text x="45" y="160" fill="#9aa6b2" font-size="11">Barras de control</text>

                            <!-- circuito primario -->
                            <path d="M180 120 C240 80 320 80 380 120 L380 180 C320 220 240 220 180 180 Z" fill="#3b82f6" opacity="0.45"/>
                            <text x="230" y="115" fill="#e6eef7" font-size="12">Circuito primario (agua a presi√≥n)</text>

                            <!-- generador de vapor -->
                            <rect x="380" y="60" width="90" height="60" fill="#4b5563" rx="6"/>
                            <text x="385" y="85" fill="#e6eef7" font-size="12">Generador de vapor</text>

                            <!-- turbina y salida -->
                            <circle cx="425" cy="200" r="30" fill="#ffb020"/>
                            <text x="405" y="245" fill="#e6eef7" font-size="12">Turbina</text>

                            <text x="40" y="280" fill="#9aa6b2" font-size="11">Componentes: N√∫cleo ‚Ä¢ Barras de control ‚Ä¢ Circuitos primarios/secundarios ‚Ä¢ Generador de vapor ‚Ä¢ Turbina ‚Ä¢ Condensador</text>
                        </svg>
                    </div>

                    <div class="simulator-controls">
                        <div class="simulator-control">
                            <label for="control-rods">Posici√≥n de Barras de Control (%) ‚Äî cuanto menor, m√°s reacci√≥n</label>
                            <input type="range" id="control-rods" min="0" max="100" value="50" oninput="onNuclearInput()" />
                            <input type="number" id="control-rods-num" value="50" />
                        </div>

                        <div class="simulator-control">
                            <label for="n_thermal">Potencia t√©rmica nominal (MWt)</label>
                            <input type="number" id="n_thermal" value="1500" />
                        </div>

                        <div class="simulator-control">
                            <label for="n_eff">Eficiencia t√©rmica ‚Üí el√©ctrica (%)</label>
                            <input type="number" id="n_eff" value="33" />
                        </div>

                        <div class="simulator-output" id="nuclear-output">
                            Estado del reactor: Estable ‚Äî Potencia el√©ctrica estimada: 0 MW
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN FOTOVOLTAICA (complejizada) --- -->
        <section id="fotovoltaica" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>‚òÄÔ∏è Energ√≠a Fotovoltaica</h2>
            <p><strong>Descripci√≥n:</strong> Paneles solares convierten irradiaci√≥n en electricidad; la orientaci√≥n, inclinaci√≥n y radiaci√≥n afectan la producci√≥n.</p>

            <div class="simulator-area" id="simulador-fotovoltaica">
                <div class="simulator-row">
                    <div class="simulator-svg" aria-hidden="true">
                        <svg viewBox="0 0 500 300" width="100%" height="100%">
                            <!-- Sol -->
                            <circle cx="420" cy="60" r="30" fill="#ffdf5d"/>
                            <text x="400" y="110" fill="#e6eef7">Sol</text>

                            <!-- Paneles (m√≥dulos) -->
                            <g transform="translate(40,160)">
                                <rect x="0" y="-40" width="140" height="80" fill="#0f1720" stroke="#0b63a8" stroke-width="4" rx="6"/>
                                <line x1="10" y1="-30" x2="130" y2="-30" stroke="#0b63a8"/>
                                <line x1="10" y1="-10" x2="130" y2="-10" stroke="#0b63a8"/>
                                <text x="10" y="-50" fill="#e6eef7">Paneles fotovoltaicos</text>
                            </g>

                            <!-- rayos solares -->
                            <line x1="420" y1="60" x2="120" y2="100" stroke="#ffdf5d" stroke-width="3"/>
                            <line x1="420" y1="60" x2="160" y2="140" stroke="#ffdf5d" stroke-width="2"/>

                            <text x="40" y="260" fill="#9aa6b2" font-size="11">Considerar inclinaci√≥n, orientaci√≥n (azimut) y p√©rdidas (sombreamiento, temperatura)</text>
                        </svg>
                    </div>

                    <div class="simulator-controls">
                        <div class="simulator-control">
                            <label for="solar-intensity">Irradiaci√≥n (W/m¬≤)</label>
                            <input type="range" id="solar-intensity" min="0" max="1200" value="700" oninput="onSolarInput()" />
                            <input type="number" id="solar-intensity-num" value="700" />
                        </div>

                        <div class="simulator-control">
                            <label for="panel-area">√Årea total de paneles (m¬≤)</label>
                            <input type="number" id="panel-area" value="10" />
                        </div>

                        <div class="simulator-control">
                            <label for="panel-eff">Eficiencia panel (%)</label>
                            <input type="number" id="panel-eff" value="18" />
                        </div>

                        <div class="simulator-control">
                            <label for="loss-factor">P√©rdidas & temperatura (%)</label>
                            <input type="number" id="loss-factor" value="15" />
                        </div>

                        <div class="simulator-output" id="solar-output">
                            Producci√≥n instant√°nea estimada: 0 W ‚Äî Resultado incluye factor de p√©rdidas.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN E√ìLICA (complejizada) --- -->
        <section id="eolica" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üå¨Ô∏è Energ√≠a E√≥lica</h2>
            <p><strong>Descripci√≥n:</strong> La potencia disponible depende del cubo de la velocidad del viento, densidad del aire y √°rea barrida por las palas.</p>

            <div class="simulator-area" id="simulador-eolica">
                <div class="simulator-row">
                    <div class="simulator-svg" aria-hidden="true">
                        <svg viewBox="0 0 500 300" width="100%" height="100%">
                            <!-- aerogenerador simplificado -->
                            <rect x="220" y="40" width="12" height="180" fill="#b0b7bd"/>
                            <g transform="translate(226,60)">
                                <line x1="0" y1="0" x2="-80" y2="-40" stroke="#fff" stroke-width="6"/>
                                <line x1="0" y1="0" x2="80" y2="-40" stroke="#fff" stroke-width="6"/>
                                <line x1="0" y1="0" x2="0" y2="80" stroke="#fff" stroke-width="6"/>
                                <circle cx="0" cy="0" r="12" fill="#e6eef7"/>
                            </g>

                            <!-- viento (l√≠neas) -->
                            <path d="M20 120 Q70 100 120 120 T220 120" stroke="#6ee7ff" stroke-width="4" fill="none"/>
                            <text x="18" y="100" fill="#e6eef7">Viento</text>

                            <text x="20" y="260" fill="#9aa6b2" font-size="11">Formato: P = 0.5 * œÅ * A * v¬≥ * Cp (Cp ‚â§ Betz ‚âà 0.59)</text>
                        </svg>
                    </div>

                    <div class="simulator-controls">
                        <div class="simulator-control">
                            <label for="wind-speed">Velocidad del viento (m/s)</label>
                            <input type="range" id="wind-speed" min="0" max="40" value="12" oninput="onWindInput()" />
                            <input type="number" id="wind-speed-num" value="12" />
                        </div>

                        <div class="simulator-control">
                            <label for="swept-area">√Årea barrida (m¬≤)</label>
                            <input type="number" id="swept-area" value="3000" />
                        </div>

                        <div class="simulator-control">
                            <label for="wind-cp">Coeficiente de potencia Cp (%) (Betz ‚âà 59)</label>
                            <input type="number" id="wind-cp" value="40" />
                        </div>

                        <div class="simulator-output" id="wind-output">
                            Potencia estimada: 0 kW (densidad aire œÅ=1.225 kg/m¬≥)
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN BIOCOMBUSTIBLES (complejizada) --- -->
        <section id="biocombustibles" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üå± Biocombustibles</h2>
            <p><strong>Descripci√≥n:</strong> Se obtienen de cultivos (soja, ma√≠z, ca√±a) y residuos org√°nicos; procesos de transesterificaci√≥n (biodi√©sel) o fermentaci√≥n (bioetanol).</p>

            <div class="simulator-area" id="simulador-biocombustibles">
                <div class="simulator-row">
                    <div class="simulator-svg" aria-hidden="true">
                        <svg viewBox="0 0 500 300" width="100%" height="100%">
                            <!-- cultivos -->
                            <rect x="30" y="180" width="60" height="90" fill="#2f7a2f"/>
                            <text x="30" y="170" fill="#e6eef7">Cultivos</text>

                            <!-- residuos -->
                            <circle cx="220" cy="210" r="36" fill="#8b3b3b"/>
                            <text x="200" y="260" fill="#e6eef7">Residuos</text>

                            <!-- planta de producci√≥n -->
                            <rect x="340" y="100" width="110" height="140" fill="#6b5e2f" rx="6"/>
                            <text x="350" y="95" fill="#e6eef7">Planta</text>

                            <!-- flechas -->
                            <path d="M90 210 L170 210" stroke="#e6eef7" stroke-width="3" marker-end="url(#arrow)"/>
                            <path d="M260 210 L340 160" stroke="#e6eef7" stroke-width="3" marker-end="url(#arrow)"/>
                            <defs>
                                <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L6,3 z" fill="#e6eef7"/>
                                </marker>
                            </defs>

                            <text x="30" y="280" fill="#9aa6b2" font-size="11">Procesos: Extracci√≥n ‚Ä¢ Fermentaci√≥n ‚Ä¢ Transesterificaci√≥n ‚Ä¢ Refinado</text>
                        </svg>
                    </div>

                    <div class="simulator-controls">
                        <div class="simulator-control">
                            <label for="biomass-kg">Biomasa disponible (kg)</label>
                            <input type="number" id="biomass-kg" value="1000" />
                        </div>

                        <div class="simulator-control">
                            <label for="pv">Poder calor√≠fico (MJ/kg)</label>
                            <input type="number" id="pc-mj" value="17" />
                        </div>

                        <div class="simulator-control">
                            <label for="bio-eff">Eficiencia del proceso (%)</label>
                            <input type="number" id="bio-eff" value="30" />
                        </div>

                        <div class="simulator-output" id="bio-output">
                            Energ√≠a √∫til estimada: 0 J ‚Äî Equivalente energ√©tico √∫til considerando eficiencia del proceso.
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <!-- Script: matriz + simuladores avanzados -->
    <script>
        // --- 1. DATOS DE LA MATRIZ (inmutable respecto a tu original) ---
        const matrizData = [
            { name: "Gas Natural", percentage: 52.0, class: "gas" },
            { name: "Petr√≥leo y Derivados", percentage: 31.0, class: "oil" },
            { name: "Hidroel√©ctrica", percentage: 4.5, class: "hydro" },
            { name: "Nuclear", percentage: 2.5, class: "nuclear" },
            { name: "Otras Renovables (E√≥lica, Solar, Biomasa)", percentage: 8.0, class: "renewable" },
            { name: "Carb√≥n y Otros", percentage: 2.0, class: "oil" }
        ];

        const listContainer = document.getElementById('matriz-data-list');

        function renderMatrizData() {
            listContainer.innerHTML = ''; // limpiar posible duplicado
            matrizData.forEach(item => {
                const listItem = document.createElement('li');
                listItem.classList.add('data-item');

                listItem.innerHTML = `
                    <span class="source-name">${item.name}</span>
                    <span class="percentage">${item.percentage.toFixed(1)}%</span>
                    <div class="progress-bar-container">
                        <div class="progress-bar ${item.class}" style="width: ${item.percentage}%;"></div>
                    </div>
                `;
                
                listContainer.appendChild(listItem);
            });
        }

        // --- 2. Navegaci√≥n ---
        function showSection(sectionId) {
            var sections = document.querySelectorAll('.content-section');
            sections.forEach(function(section) {
                section.classList.remove('active');
            });
            var activeSection = document.getElementById(sectionId);
            if (activeSection) {
                activeSection.classList.add('active');
                window.scrollTo({top:0, behavior:'smooth'});
            }
        }

        // --- 3. HIDROEL√âCTRICA: l√≥gica y sincronizaci√≥n de controles ---
        function onHydroInput(){
            const levelRange = document.getElementById('embalse-level');
            const levelNum = document.getElementById('embalse-level-num');
            const caudalRange = document.getElementById('hydro-caudal');
            const caudalNum = document.getElementById('hydro-caudal-num');
            const effRange = document.getElementById('hydro-eff');
            const effNum = document.getElementById('hydro-eff-num');

            // sincronizar valores
            if(event.target === levelRange) levelNum.value = levelRange.value;
            if(event.target === caudalRange) caudalNum.value = caudalRange.value;
            if(event.target === effRange) effNum.value = effRange.value;
            if(event.target === levelNum) levelRange.value = levelNum.value;
            if(event.target === caudalNum) caudalRange.value = caudalNum.value;
            if(event.target === effNum) effRange.value = effNum.value;

            calcHydro();
        }
        // presets
        function setHydroPreset(val){
            document.getElementById('embalse-level').value = val;
            document.getElementById('embalse-level-num').value = val;
            calcHydro();
        }

        function calcHydro(){
            // P = rho * g * Q * h * eta  (W)
            const rho = 1000; // kg/m3 agua dulce
            const g = 9.81;
            const h = Number(document.getElementById('embalse-level').value);
            const Q = Number(document.getElementById('hydro-caudal').value);
            const eta = Number(document.getElementById('hydro-eff').value) / 100;
            const P_watts = rho * g * Q * h * eta;
            const P_mw = P_watts / 1e6;
            document.getElementById('hydro-output').textContent = `Potencia instant√°nea: ${P_mw.toFixed(3)} MW  (‚âà ${P_watts.toFixed(0)} W) ‚Äî F√≥rmula: œÅ¬∑g¬∑Q¬∑h¬∑Œ∑`;
        }

        // --- 4. NUCLEAR: l√≥gica ---
        function onNuclearInput(){
            const rodsRange = document.getElementById('control-rods');
            const rodsNum = document.getElementById('control-rods-num');
            if(event.target === rodsRange) rodsNum.value = rodsRange.value;
            if(event.target === rodsNum) rodsRange.value = rodsNum.value;
            calcNuclear();
        }

        function calcNuclear(){
            // Simplificaci√≥n: potencia el√©ctrica = potencia t√©rmica * eficiencia * factor de barras
            const rodsPct = Number(document.getElementById('control-rods').value); // 0..100
            const thermalMWt = Number(document.getElementById('n_thermal').value); // MWt
            const eff = Number(document.getElementById('n_eff').value) / 100;
            // modelado: asumimos potencia t√©rmica disponible escala con (1 - rodsRetractedFraction)
            // si barras al 100% => todo moderado; si barras 0% => sobreactividad (para mostrar rango)
            const reactivityFactor = 1 + ((50 - rodsPct) / 100); // ejemplo: rods 50% -> factor 1
            const thermalAdjusted = Math.max(0, thermalMWt * reactivityFactor);
            const electricalMW = thermalAdjusted * eff;
            // estado cualitativo
            let status = 'Estable';
            if (rodsPct < 20) status = 'Cr√≠tica (sobreactividad) ‚Äî riesgo';
            else if (rodsPct > 80) status = 'Inhibida (potencia baja)';
            document.getElementById('nuclear-output').textContent = `Estado: ${status} ‚Äî Potencia el√©ctrica estimada: ${electricalMW.toFixed(2)} MW (base t√©rmica ajustada: ${thermalAdjusted.toFixed(1)} MWt)`;
        }

        // --- 5. FOTOVOLTAICA ---
        function onSolarInput(){
            const radRange = document.getElementById('solar-intensity');
            const radNum = document.getElementById('solar-intensity-num');
            if(event.target === radRange) radNum.value = radRange.value;
            if(event.target === radNum) radRange.value = radNum.value;
            calcSolar();
        }

        function calcSolar(){
            // P = G * A * eta * (1 - losses)
            const G = Number(document.getElementById('solar-intensity').value); // W/m2
            const A = Number(document.getElementById('panel-area').value); // m2
            const eta = Number(document.getElementById('panel-eff').value) / 100;
            const losses = Number(document.getElementById('loss-factor').value) / 100;
            const P = G * A * eta * (1 - losses); // W
            document.getElementById('solar-output').textContent = `Producci√≥n instant√°nea: ${P.toFixed(2)} W  ‚Äî (G:${G} W/m¬≤, A:${A} m¬≤, Œ∑:${(eta*100).toFixed(1)}%, p√©rdidas:${(losses*100).toFixed(1)}%)`;
        }

        // --- 6. E√ìLICA ---
        function onWindInput(){
            const vRange = document.getElementById('wind-speed');
            const vNum = document.getElementById('wind-speed-num');
            if(event.target === vRange) vNum.value = vRange.value;
            if(event.target === vNum) vRange.value = vNum.value;
            calcWind();
        }

        function calcWind(){
            // P = 0.5 * rho * A * v^3 * Cp
            const rho = 1.225; // kg/m3
            const v = Number(document.getElementById('wind-speed').value);
            const A = Number(document.getElementById('swept-area').value);
            let Cp = Number(document.getElementById('wind-cp').value) / 100; // e.g. 0.4
            // limitar Cp al limite de Betz
            const betz = 0.59;
            if(Cp > betz) Cp = betz;
            const P_watts = 0.5 * rho * A * Math.pow(v,3) * Cp;
            const P_kW = P_watts / 1000;
            document.getElementById('wind-output').textContent = `Potencia estimada: ${P_kW.toFixed(2)} kW (${P_watts.toFixed(0)} W) ‚Äî Cp usado: ${(Cp*100).toFixed(1)}% (Betz=${(betz*100).toFixed(1)}%)`;
        }

        // --- 7. BIOCOMBUSTIBLES ---
        function calcBio(){
            const b = Number(document.getElementById('biomass-kg').value);
            const pc = Number(document.getElementById('pc-mj').value);
            const eff = Number(document.getElementById('bio-eff').value) / 100;
            // Energ√≠a (J) = b (kg) * pc (MJ/kg) * 1e6 (J/MJ) * eff
            const E = b * pc * 1e6 * eff;
            document.getElementById('bio-output').textContent = `Energ√≠a √∫til estimada: ${E.toFixed(0)} J  ‚Äî Equiv. t√©rmica √∫til: ${(E/3.6e6).toFixed(2)} kWh (eficiencia ${ (eff*100).toFixed(1) }%)`;
        }

        // --- 8. Inicializaci√≥n y sincronizaci√≥n al cargar ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMatrizData();

            // Inicializar simuladores con valores por defecto
            // Hidro
            document.getElementById('embalse-level-num').addEventListener('input', onHydroInput);
            document.getElementById('hydro-caudal-num').addEventListener('input', onHydroInput);
            document.getElementById('hydro-eff-num').addEventListener('input', onHydroInput);
            document.getElementById('embalse-level').addEventListener('input', onHydroInput);
            document.getElementById('hydro-caudal').addEventListener('input', onHydroInput);
            document.getElementById('hydro-eff').addEventListener('input', onHydroInput);

            calcHydro();

            // Nuclear
            document.getElementById('control-rods-num').addEventListener('input', onNuclearInput);
            document.getElementById('control-rods').addEventListener('input', onNuclearInput);
            calcNuclear();

            // Solar
            document.getElementById('solar-intensity-num').addEventListener('input', onSolarInput);
            document.getElementById('solar-intensity').addEventListener('input', onSolarInput);
            document.getElementById('panel-area').addEventListener('input', calcSolar);
            document.getElementById('panel-eff').addEventListener('input', calcSolar);
            document.getElementById('loss-factor').addEventListener('input', calcSolar);
            calcSolar();

            // E√≥lica
            document.getElementById('wind-speed-num').addEventListener('input', onWindInput);
            document.getElementById('wind-speed').addEventListener('input', onWindInput);
            document.getElementById('swept-area').addEventListener('input', calcWind);
            document.getElementById('wind-cp').addEventListener('input', calcWind);
            calcWind();

            // Biocombustibles
            document.getElementById('biomass-kg').addEventListener('input', calcBio);
            document.getElementById('pc-mj').addEventListener('input', calcBio);
            document.getElementById('bio-eff').addEventListener('input', calcBio);
            calcBio();
        });

        // Atajos: llamadas expl√≠citas (por si se desea usar botones)
        function calcHydroButton(){ calcHydro(); }
        function calcNuclearButton(){ calcNuclear(); }
        function calcSolarButton(){ calcSolar(); }
        function calcWindButton(){ calcWind(); }
        function calcBioButton(){ calcBio(); }

    </script>

</body>
</html>
