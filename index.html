<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matriz Energ√©tica y Simuladores de Argentina</title>
    <style>
        /* Estilos de la Aplicaci√≥n Base */
        body { font-family: 'Arial', sans-serif; margin: 0; padding: 0; background-color: #f0f4f7; color: #333; }
        header { background-color: #1a5c92; color: white; padding: 25px 0; text-align: center; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        h1 { margin: 0; font-size: 2.2em; }
        .container { width: 95%; max-width: 1100px; margin: 30px auto; }
        
        /* Estilos de Secciones y Botones */
        .content-section { 
            display: none; 
            padding: 30px; 
            border: 1px solid #cceeff; 
            background-color: white; 
            margin-bottom: 20px; 
            border-radius: 10px; 
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.05); 
        }
        .content-section.active { display: block; }
        .nav-buttons button, .back-button { 
            background-color: #007bff; color: white; border: none; padding: 12px 20px; margin: 8px 5px; 
            cursor: pointer; border-radius: 6px; font-size: 1em; transition: background-color 0.3s, transform 0.1s;
        }
        .nav-buttons button:hover, .back-button:hover { background-color: #0056b3; transform: translateY(-1px); }
        .back-button { background-color: #6c757d !important; margin-bottom: 20px; }
        .map-button { background-color: #28a745 !important; }
        .map-button:hover { background-color: #1e7e34 !important; }
        
        /* Controles de Simulador */
        .simulator-area { 
            background-color: #e9f5ff; padding: 25px; margin-top: 20px; border: 2px dashed #007bff; 
            border-radius: 8px; min-height: 500px; display: flex; flex-direction: column; align-items: center;
        }
        .simulator-control { 
            margin-bottom: 20px; width: 80%; max-width: 500px; text-align: left; padding: 15px;
            background-color: #d1e7ff; border-radius: 8px;
        }
        .simulator-control label { display: block; margin-bottom: 5px; font-weight: bold; }
        .simulator-control input[type="range"] { width: 100%; }
        .simulator-output { 
            font-size: 1.2em; font-weight: bold; color: #1a5c92; margin-top: 15px; padding: 10px;
            border: 1px solid #1a5c92; border-radius: 4px; background-color: #f8fbfc;
        }

        /* --- VISUALIZACI√ìN DE MATRIZ DE DATOS (GR√ÅFICO DE TORTA) --- */
        .pie-chart-container {
            width: 100%; max-width: 350px; height: 350px; margin: 20px auto; position: relative;
        }
        #pie-chart {
            width: 100%; height: 100%; border-radius: 50%;
            background: conic-gradient(
                #e67e22 0% 52.0%, /* Gas */
                #34495e 52.0% 83.0%, /* Petr√≥leo */
                #2980b9 83.0% 87.5%, /* Hidro */
                #27ae60 87.5% 90.0%, /* Nuclear */
                #f1c40f 90.0% 98.0%, /* Renovables */
                #34495e 98.0% 100% /* Otros */
            );
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }
        .chart-legend {
            list-style: none; padding: 0; display: flex; flex-wrap: wrap; justify-content: center; margin-top: 20px;
        }
        .legend-item {
            margin: 5px 15px; font-size: 0.9em;
        }
        .legend-color {
            display: inline-block; width: 12px; height: 12px; margin-right: 5px; border-radius: 3px;
        }
        /* Colores de la leyenda */
        .gas-color { background-color: #e67e22; } .oil-color { background-color: #34495e; } 
        .hydro-color { background-color: #2980b9; } .nuclear-color { background-color: #27ae60; } 
        .renewable-color { background-color: #f1c40f; }

        /* --- ESTILOS ESPEC√çFICOS DEL MAPA --- */
        #mapa-argentina {
            width: 90%; max-width: 450px; 
            height: 850px; 
            border: 1px solid #ccc; border-radius: 8px;
            margin: 20px auto;
            position: relative; 
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
        }

        /* Imagen de fondo expl√≠cita para asegurar la carga */
        #argentina-map-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Asegura que la imagen cubra el contenedor */
            border-radius: 8px;
        }
        
        /* SVG Overlay para los Puntos */
        #map-overlay-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; 
        }
        
        /* Estilos de los puntos y la leyenda dentro del SVG */
        .map-point {
            cursor: pointer;
            pointer-events: all; 
            transition: fill 0.2s, transform 0.2s;
        }
        .map-point:hover {
            transform: scale(1.5);
            stroke: black;
            stroke-width: 2px;
        }
        .solar-point { fill: #fbc02d; }
        .wind-point { fill: #00bcd4; }
        .hydro-point { fill: #2980b9; }
        .bio-point { fill: #8bc34a; }
        .nuclear-point { fill: #27ae60; }


        /* Estilo del Modal de Informaci√≥n */
        .info-modal {
            background-color: #e9f5ff; padding: 20px; border-radius: 8px; border: 2px solid #007bff;
            margin-top: 20px; width: 100%; max-width: 450px; margin-left: auto; margin-right: auto;
            text-align: left;
        }
        .modal-title { font-size: 1.5em; color: #1a5c92; margin-bottom: 10px; border-bottom: 2px solid #007bff; padding-bottom: 5px;}
        .modal-img { width: 100%; height: 150px; object-fit: cover; border-radius: 6px; margin-bottom: 10px; }
        .modal-data p { margin: 5px 0; font-size: 0.9em; }
        .modal-data strong { color: #0056b3; }
        
        /* ESTILOS DE SIMULADORES */
        /* Animaciones base */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes fission {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes steamFlow {
            0% { background: linear-gradient(to right, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.2)); }
            50% { background: linear-gradient(to right, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.8)); }
            100% { background: linear-gradient(to right, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.2)); }
        }

        /* --- ESTILOS ESPEC√çFICOS DE LA SECCI√ìN NUCLEAR --- */
        .nuclear-diagram-container {
            width: 90%; max-width: 700px; height: 350px; 
            background: #ffffff; border: 4px solid #b2dfdb; border-radius: 10px; 
            margin-bottom: 20px; position: relative;
            display: flex; justify-content: space-between; align-items: flex-start;
            padding: 10px; box-sizing: border-box;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Componentes del diagrama */
        .component {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            font-size: 0.8em;
            font-weight: bold;
            color: #333;
        }

        /* Reactor */
        #reactor-viz {
            width: 100px; height: 150px; 
            background: #a5d6a7; border: 5px solid #2e7d32; border-radius: 5px;
            position: relative; overflow: hidden; margin-bottom: 5px;
            display: flex; justify-content: center; align-items: flex-start;
            padding-top: 10px;
        }
        #reactor-core {
            width: 80%; height: 80%; background: #4caf50; border-radius: 3px;
            position: relative;
        }
        .rod {
            width: 8px; background: #546e7a; border-radius: 2px; position: absolute; top: 0;
            transition: transform 0.3s ease, height 0.3s ease; height: 100%;
        }
        #rod-1 { left: 10%; } #rod-2 { left: 45%; } #rod-3 { right: 10%; }
        
        /* Intercambiador de Calor (Caldera) */
        #heat-exchanger {
            width: 80px; height: 120px; background: #ffe0b2; border: 5px solid #ff9800; border-radius: 5px;
            margin-bottom: 5px;
        }

        /* Turbina */
        #turbine {
            width: 120px; height: 50px; background: #cfd8dc; border: 5px solid #607d8b; border-radius: 25px;
            margin-bottom: 5px;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }
        #turbine-blades {
            width: 40px; height: 40px; background: #90a4ae; border-radius: 50%;
            transition: transform 0.1s linear;
        }
        
        /* Generador */
        #generator {
            width: 60px; height: 60px; background: #f44336; border: 5px solid #d32f2f; border-radius: 50%;
            margin-bottom: 5px;
            line-height: 50px; font-size: 0.9em; color: white;
        }

        /* Ca√±er√≠as (L√≠neas) */
        .pipe-line {
            position: absolute;
            height: 10px; /* Ancho de la tuber√≠a */
            z-index: 5;
        }
        /* PRIMARIO: Agua caliente del reactor a la caldera (ROJO) */
        #pipe-primary-out {
            top: 100px; left: 100px; width: 100px; background: #e57373;
            border-top: 1px solid #c62828; border-bottom: 1px solid #c62828;
            height: 15px; /* M√°s ancho para el primario */
        }
        /* SECUNDARIO: Vapor de la caldera a la turbina (BLANCO/GRIS) */
        #pipe-steam {
            top: 70px; left: 300px; width: 150px; 
            background: linear-gradient(to right, #9e9e9e, #e0e0e0);
            border-radius: 5px;
            animation: steamFlow 1s infinite alternate; /* Animaci√≥n de flujo de vapor */
        }

        /* Indicador de Electricidad */
        #electric-flow {
            position: absolute; bottom: 10px; right: 10px;
            width: 150px; height: 20px; background: #64b5f6; border-radius: 10px;
            color: white; line-height: 20px; font-size: 0.8em; text-align: center;
        }
    </style>
</head>
<body>

    <header>
        <h1>Matriz Energ√©tica y Simuladores de Argentina üá¶üá∑</h1>
    </header>

    <div class="container">

        <!-- --- SECCI√ìN PRINCIPAL: MATRIZ ENERG√âTICA --- -->
        <section id="matriz" class="content-section active">
            <h2>üìä Composici√≥n de la Oferta Interna de Energ√≠a Primaria</h2>
            <p>La matriz energ√©tica de Argentina ilustra la distribuci√≥n de las fuentes utilizadas para cubrir la demanda. M√°s del 80% proviene de fuentes f√≥siles, lo que marca un gran desaf√≠o para la transici√≥n energ√©tica.</p>

            <div class="matriz-viz">
                <h3>Distribuci√≥n por Fuente (Datos Ilustrativos)</h3>
                
                <!-- GR√ÅFICO DE TORTA -->
                <div class="pie-chart-container">
                    <div id="pie-chart"></div>
                </div>

                <ul class="chart-legend">
                    <li class="legend-item"><span class="legend-color gas-color"></span>Gas Natural (52.0%)</li>
                    <li class="legend-item"><span class="legend-color oil-color"></span>Petr√≥leo y Derivados (31.0%)</li>
                    <li class="legend-item"><span class="legend-color hydro-color"></span>Hidroel√©ctrica (4.5%)</li>
                    <li class="legend-item"><span class="legend-color nuclear-color"></span>Nuclear (2.5%)</li>
                    <li class="legend-item"><span class="legend-color renewable-color"></span>Otras Renovables (8.0%)</li>
                    <li class="legend-item"><span class="legend-color oil-color"></span>Carb√≥n y Otros (2.0%)</li>
                </ul>
            </div>

            <h2 style="margin-top: 40px;">üó∫Ô∏è Geolocalizaci√≥n y Simuladores</h2>
            <div class="nav-buttons">
                <button class="map-button" onclick="showSection('mapa');">üåç Mapa Interactivo de Centrales</button>
            </div>
            <div class="nav-buttons">
                <button onclick="showSection('jugar');">üéÆ Simuladores para Aprender Jugando</button>
                <button onclick="showSection('hidro');">üíß Hidroel√©ctrica</button>
                <button onclick="showSection('nuclear');">‚öõÔ∏è Nuclear</button>
                <button onclick="showSection('fotovoltaica');">‚òÄÔ∏è Fotovoltaica</button>
                <button onclick="showSection('eolica');">üå¨Ô∏è E√≥lica</button>
                <button onclick="showSection('biocombustibles');">üå± Biocombustibles</button>
            </div>
        </section>

        <!-- --- SECCI√ìN: MAPA INTERACTIVO --- -->
        <section id="mapa" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üó∫Ô∏è Mapa Interactivo de Centrales Energ√©ticas</h2>
            <p>Explora la distribuci√≥n simulada de las principales plantas de energ√≠a renovable y de generaci√≥n base en Argentina.</p>

            <div class="simulator-area" style="min-height: 600px; display: block; text-align: center;">

                <!-- Control de Explorar Mi Regi√≥n -->
                <div class="simulator-control" style="max-width: none;">
                    <label for="region-selector">Modo ‚ÄúExplorar mi Regi√≥n‚Äù: Selecciona tu Provincia</label>
                    <select id="region-selector" onchange="showRegionInfo(this.value)" style="padding: 8px; border-radius: 4px; width: 100%;">
                        <option value="">-- Seleccionar Provincia --</option>
                        <option value="Mendoza">Mendoza (Solar/Hidro)</option>
                        <option value="Chubut">Chubut (E√≥lica)</option>
                        <option value="Buenos Aires">Buenos Aires (Nuclear/Biog√°s)</option>
                        <option value="Santa Fe">Santa Fe (Biocombustibles)</option>
                        <option value="Jujuy">Jujuy (Solar)</option>
                    </select>
                </div>
                
                <!-- Contenedor del Mapa con Imagen de Fondo y SVG Overlay -->
                <div id="mapa-argentina" >
                    <!-- IMAGEN DE FONDO EXPL√çCITA PARA MAYOR COMPATIBILIDAD -->
                    <img id="argentina-map-img" src="https://placehold.co/450x850/003366/ffffff?text=Mapa+Pol√≠tico+de+Argentina" alt="Mapa Pol√≠tico de Argentina" />

                    <!-- El SVG se usa como una capa de superposici√≥n (overlay) con viewBox ajustado a las dimensiones de la imagen -->
                    <svg id="map-overlay-svg" viewBox="0 0 450 850" xmlns="http://www.w3.org/2000/svg">
                        
                        <!-- Puntos de Energ√≠a Simulados (Coordenadas ajustadas al nuevo mapa de 450x850) -->
                        
                        <!-- Jujuy (Solar): Far North (Arriba a la izquierda) -->
                        <circle class="map-point solar-point" cx="160" cy="110" r="12" onclick="showPlantDetails('Solar Jujuy', 'Jujuy')">
                            <title>Parque Solar Jujuy</title>
                        </circle>

                        <!-- Santa Fe (Biocombustibles): Noreste -->
                        <circle class="map-point bio-point" cx="240" cy="330" r="12" onclick="showPlantDetails('Biocombustibles Santa Fe', 'Santa Fe')">
                            <title>Planta de Biocombustibles Santa Fe</title>
                        </circle>

                        <!-- Buenos Aires (Biog√°s/Nuclear): Este-Central -->
                        <circle class="map-point bio-point" cx="270" cy="500" r="12" onclick="showPlantDetails('Planta Biog√°s BA', 'Buenos Aires')">
                            <title>Planta de Biog√°s Buenos Aires</title>
                        </circle>
                        <circle class="map-point nuclear-point" cx="290" cy="550" r="12" onclick="showPlantDetails('Central Nuclear BA', 'Buenos Aires')">
                            <title>Central Nuclear</title>
                        </circle>

                        <!-- Mendoza (Hidro): Oeste-Centro -->
                        <circle class="map-point hydro-point" cx="120" cy="500" r="12" onclick="showPlantDetails('Central Hidro. Mendoza', 'Mendoza')">
                            <title>Central Hidroel√©ctrica Mendoza</title>
                        </circle>
                        
                        <!-- Chubut (E√≥lica): Sur -->
                        <circle class="map-point wind-point" cx="150" cy="780" r="12" onclick="showPlantDetails('Parque E√≥lico Chubut', 'Chubut')">
                            <title>Parque E√≥lico Chubut</title>
                        </circle>
                        
                        <!-- Leyenda del Mapa -->
                        <g transform="translate(300, 20)">
                            <rect x="0" y="0" width="130" height="155" fill="rgba(255, 255, 255, 0.9)" stroke="#333" stroke-width="1" rx="5"/>
                            <text x="5" y="15" font-size="12" font-weight="bold" pointer-events="none">Leyenda:</text>
                            <circle cx="10" cy="35" r="5" class="solar-point"/>
                            <text x="20" y="40" font-size="10" pointer-events="none">Solar</text>
                            <circle cx="10" cy="60" r="5" class="wind-point"/>
                            <text x="20" y="65" font-size="10" pointer-events="none">E√≥lica</text>
                            <circle cx="10" cy="85" r="5" class="hydro-point"/>
                            <text x="20" y="90" font-size="10" pointer-events="none">Hidroel√©ctrica</text>
                            <circle cx="10" cy="110" r="5" class="bio-point"/>
                            <text x="20" y="115" font-size="10" pointer-events="none">Biog√°s/Bio</text>
                            <circle cx="10" cy="135" r="5" class="nuclear-point"/>
                            <text x="20" y="140" font-size="10" pointer-events="none">Nuclear</text>
                        </g>
                    </svg>
                </div>

                <!-- Modal de Informaci√≥n de la Planta -->
                <div id="plant-info-modal" class="info-modal" style="display: none;">
                    <h3 class="modal-title" id="modal-plant-name"></h3>
                    <img id="modal-plant-image" class="modal-img" src="" onerror="this.src='https://placehold.co/400x150/cccccc/333333?text=Foto+Simulada'" alt="Imagen de la planta">
                    <div class="modal-data">
                        <p><strong>Tipo:</strong> <span id="modal-plant-type"></span></p>
                        <p><strong>Provincia:</strong> <span id="modal-plant-province"></span></p>
                        <p><strong>Producci√≥n Estimada:</strong> <span id="modal-plant-production"></span></p>
                        <p><strong>Impacto Ambiental:</strong> <span id="modal-plant-impact"></span></p>
                    </div>
                </div>

                <!-- Informaci√≥n de la Regi√≥n (Explorar Mi Regi√≥n) -->
                <div id="region-info-area" class="info-modal" style="display: none; background-color: #ffe0b2; border-color: #ff9800;">
                    <h3 class="modal-title" style="color: #e65100; border-bottom: 2px solid #ff9800;">üîç Informaci√≥n Regional para <span id="region-name"></span></h3>
                    <div id="region-details" class="modal-data"></div>
                </div>
            </div>
        </section>


        <!-- --- SECCI√ìN: SIMULADORES PARA JUGAR (Mantengo el contenido por si quieres volver) --- -->
        <section id="jugar" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üéÆ Simuladores para Aprender Jugando</h2>
            <p>Aqu√≠ puedes experimentar con los principios clave de la generaci√≥n y el ahorro de energ√≠a mediante escenarios interactivos.</p>

            <div class="simulator-area" style="min-height: 400px; align-items: stretch; gap: 20px;">
                
                <!-- 1. Simulador Solar -->
                <div class="simulator-control" style="max-width: 100%; background-color: #fff9c4; border-color: #fdd835;">
                    <h3 style="font-size: 1.5em; color: #f9a825; margin-bottom: 10px;">‚òÄÔ∏è 1. Simulador Solar</h3>
                    <p>Ajusta las variables para maximizar la producci√≥n de tu panel:</p>
                    <div style="margin-top: 10px;">
                        <label for="solar-angle">√Ångulo del Panel (0¬∞-90¬∞): <span id="solar-angle-val">45</span>¬∞</label>
                        <input type="range" id="solar-angle" min="0" max="90" value="45" oninput="document.getElementById('solar-angle-val').textContent=this.value;">
                    </div>
                    <div style="margin-top: 10px;">
                        <label for="solar-location">Ubicaci√≥n (Latitud):</label>
                        <select id="solar-location" style="width: 100%; padding: 5px; border-radius: 4px;">
                            <option value="40">Norte (Jujuy, Salta) - Alto Sol</option>
                            <option value="20">Centro (CBA, SL) - Sol Medio</option>
                            <option value="0">Sur (Chubut, Santa Cruz) - Sol Bajo</option>
                        </select>
                    </div>
                    <div style="margin-top: 10px;">
                        <label for="solar-weather">Clima:</label>
                        <select id="solar-weather" style="width: 100%; padding: 5px; border-radius: 4px;">
                            <option value="1">Soleado</option>
                            <option value="0.6">Parcialmente Nublado</option>
                            <option value="0.2">Nublado</option>
                        </select>
                    </div>
                    <button style="background-color: #f9a825; color: white; padding: 10px; border-radius: 5px; margin-top: 15px; width: 100%; font-weight: bold;" onclick="simulatePlaySolar()">Calcular Producci√≥n</button>
                    <div class="simulator-output" id="play-solar-output" style="background-color: #ffecb3;">Producci√≥n Estimada: 0.00 kWh</div>
                </div>

                <!-- 2. Simulador E√≥lico -->
                <div class="simulator-control" style="max-width: 100%; background-color: #bbdefb; border-color: #42a5f5;">
                    <h3 style="font-size: 1.5em; color: #1e88e5; margin-bottom: 10px;">üå¨Ô∏è 2. Simulador E√≥lico</h3>
                    <p>Eval√∫a c√≥mo el dise√±o y el viento afectan la potencia (recuerda: $P \propto v^3$):</p>
                    <div style="margin-top: 10px;">
                        <label for="wind-height">Altura de la Torre (metros): <span id="wind-height-val">50</span>m</label>
                        <input type="range" id="wind-height" min="20" max="100" value="50" oninput="document.getElementById('wind-height-val').textContent=this.value;">
                    </div>
                    <div style="margin-top: 10px;">
                        <label for="wind-type">Tipo de Molino:</label>
                        <select id="wind-type" style="width: 100%; padding: 5px; border-radius: 4px;">
                            <option value="1">Alta Potencia (Eje Horizontal)</option>
                            <option value="0.5">Baja Potencia (Eje Vertical)</option>
                        </select>
                    </div>
                    <div style="margin-top: 10px;">
                        <label for="wind-speed-play">Velocidad del Viento (m/s): <span id="wind-speed-val-play">10</span> m/s</label>
                        <input type="range" id="wind-speed-play" min="0" max="25" value="10" oninput="document.getElementById('wind-speed-val-play').textContent=this.value;">
                    </div>
                    <button style="background-color: #1e88e5; color: white; padding: 10px; border-radius: 5px; margin-top: 15px; width: 100%; font-weight: bold;" onclick="simulatePlayWind()">Calcular Potencia</button>
                    <div class="simulator-output" id="play-wind-output" style="background-color: #e3f2fd;">Potencia Estimada: 0.00 kW</div>
                </div>

                <!-- 3. Simulador Mi Casa Sostenible -->
                <div class="simulator-control" style="max-width: 100%; background-color: #c8e6c9; border-color: #66bb6a;">
                    <h3 style="font-size: 1.5em; color: #388e3c; margin-bottom: 10px;">üè° 3. Mi Casa Sostenible</h3>
                    <p>Balancea la generaci√≥n vs. el consumo para un hogar:</p>
                    
                    <h4 style="font-weight: bold; margin-top: 15px; border-bottom: 1px dashed #66bb6a;">Generaci√≥n Estimada (kWh/mes)</h4>
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <label>Paneles Solares:</label>
                        <input type="number" id="gen-solar" value="250" style="width: 80px; padding: 3px; border: 1px solid #ccc; border-radius: 4px;">
                    </div>

                    <h4 style="font-weight: bold; margin-top: 15px; border-bottom: 1px dashed #66bb6a;">Consumo (kWh/mes)</h4>
                    <div style="margin-top: 5px;">
                        <label>Eficiencia Energ√©tica (Aislamiento, LEDs):</label>
                        <select id="con-efficiency" style="width: 100%; padding: 5px; border-radius: 4px;">
                            <option value="1">Baja (Consumo Base: 400)</option>
                            <option value="0.8">Media (Consumo Base: 320)</option>
                            <option value="0.6">Alta (Consumo Base: 240)</option>
                        </select>
                    </div>
                    <div style="margin-top: 10px;">
                        <label for="con-habits">H√°bitos de Ahorro (Apagar luces, etc.):</label>
                        <select id="con-habits" style="width: 100%; padding: 5px; border-radius: 4px;">
                            <option value="1">Malo (Consumo Extra: +100)</option>
                            <option value="0.5">Normal (Consumo Extra: +50)</option>
                            <option value="0">Excelente (Consumo Extra: +0)</option>
                        </select>
                    </div>

                    <button style="background-color: #388e3c; color: white; padding: 10px; border-radius: 5px; margin-top: 15px; width: 100%; font-weight: bold;" onclick="simulatePlayHome()">Calcular Balance</button>
                    <div class="simulator-output" id="play-home-output" style="background-color: #e8f5e9;">Balance: 0.00 kWh (Neutral)</div>
                </div>

            </div>
        </section>


        <!-- --- SECCI√ìN HIDROEL√âCTRICA --- -->
        <section id="hidro" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üíß Energ√≠a Hidroel√©ctrica</h2>
            
            <h3>Descripci√≥n Breve</h3>
            <p><strong>Descripci√≥n:</strong> Utiliza la energ√≠a potencial gravitatoria del agua almacenada. La potencia generada es directamente proporcional al <strong>caudal</strong> y al <strong>salto o diferencia de altura (Head)</strong> entre el embalse y la turbina.</p>

            <h3>Simulador Interactivo: Nivel del Embalse</h3>
            <div class="simulator-area" id="simulador-hidro">
                <p>Mueve el deslizador para simular c√≥mo un cambio en el nivel del embalse afecta el salto y, por lo tanto, la potencia.</p>
                
                <!-- VISUALIZACI√ìN HIDROEL√âCTRICA DETALLADA -->
                <div class="hydro-viz-container">
                    <div class="reservoir-side">
                        <div id="water-level" style="height: 60%;"></div>
                        <div id="water-head-line" style="top: 70px;"></div>
                        <span class="text-label label-embalse">EMBALSE</span>
                        <span id="dam-crest" style="top: 10px; color: #546e7a;">NIVEL M√ÅX.</span>
                    </div>
                    
                    <div id="dam-structure" style="position: absolute; bottom: 0; left: 60%; width: 5px; height: 100%; background: #9e9e9e; z-index: 5;"></div>

                    <div class="powerhouse-side">
                        <span class="text-label" style="top: 10px; left: 10px; color: #1a5c92;">SALA DE M√ÅQUINAS</span>
                        <svg class="turbine-svg" id="turbine-viz" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="40" fill="#78909c"/>
                            <path style="fill: #455a64; stroke: #263238; stroke-width: 1;" d="M 50 10 C 65 25, 65 75, 50 90 L 50 80 C 60 70, 60 30, 50 20 Z" transform="rotate(0, 50, 50)"/>
                            <path style="fill: #455a64; stroke: #263238; stroke-width: 1;" d="M 50 10 C 65 25, 65 75, 50 90 L 50 80 C 60 70, 60 30, 50 20 Z" transform="rotate(120, 50, 50)"/>
                            <path style="fill: #455a64; stroke: #263238; stroke-width: 1;" d="M 50 10 C 65 25, 65 75, 50 90 L 50 80 C 60 70, 60 30, 50 20 Z" transform="rotate(240, 50, 50)"/>
                            <circle cx="50" cy="50" r="10" fill="#37474f"/>
                        </svg>
                        <span class="text-label label-tailrace" style="bottom: 10px; right: 10px; background: #00bcd4; padding: 2px;">SALIDA DE AGUA</span>
                    </div>

                    <div id="water-flow-indicator" style="position: absolute; left: 55%; bottom: 50px; width: 10px; height: 30px; background: linear-gradient(to bottom, #4fc3f7, #00bcd4); transform: skewX(10deg); opacity: 0; transition: opacity 0.5s; z-index: 10;"></div>
                    <span class="text-label" style="top: 35%; left: 65%; color: red; font-size: 1.1em; font-weight: bold;">SALTO (H)</span>
                </div>
                
                <div class="simulator-control">
                    <label for="embalse-level">Nivel del Embalse (Altura de Agua)</label>
                    <input type="range" id="embalse-level" min="10" max="90" value="70" oninput="simulateHydro(this.value)">
                    <p>Nivel Actual: <span id="current-level">70</span>% del m√°ximo</p>
                </div>
                
                <div class="simulator-output">
                    Potencia Generada: <span id="hydro-output">0.00</span> MW
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN NUCLEAR (ACTUALIZADA con Flujo T√©rmico) --- -->
        <section id="nuclear" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>‚öõÔ∏è Energ√≠a Nuclear</h2>
            
            <h3>Descripci√≥n Breve</h3>
            <p><strong>Descripci√≥n:</strong> Se basa en la **fisi√≥n nuclear** para generar calor, el cual se usa para producir vapor. El vapor a alta presi√≥n mueve una turbina, que est√° conectada a un generador el√©ctrico.</p>

            <h3>Simulador Interactivo: Control de Reactor y Flujo de Energ√≠a</h3>
            <div class="simulator-area" id="simulador-nuclear">
                <p>Ajusta el nivel de las barras de control para simular la intensidad de la reacci√≥n y la potencia el√©ctrica generada.</p>

                <!-- VISUALIZACI√ìN NUCLEAR DETALLADA: REACTOR Y CICLO DE VAPOR -->
                <div class="nuclear-diagram-container">
                    
                    <!-- 1. REACTOR (Generador de Calor) -->
                    <div class="component" style="align-self: flex-end;">
                        <div id="reactor-viz">
                            <div id="reactor-core">
                                <div class="rod" id="rod-1" style="transform: translateY(0%); height: 100%;"></div>
                                <div class="rod" id="rod-2" style="transform: translateY(0%); height: 100%;"></div>
                                <div class="rod" id="rod-3" style="transform: translateY(0%); height: 100%;"></div>
                                <span style="position: absolute; top: 35%; color: white; font-size: 0.7em;">N√öCLEO</span>
                            </div>
                        </div>
                        <div style="background: #333; color: white; padding: 5px; border-radius: 4px; margin-top: -15px;">EDIFICIO DE CONTENCI√ìN</div>
                        <span>REACTIVIDAD: <span id="reactivity-status" style="font-weight: bold; color: green;">Estable</span></span>
                    </div>

                    <!-- CA√ëER√çA 1: PRIMARIO (Agua caliente a la Caldera) -->
                    <div class="pipe-line" id="pipe-primary-out" style="top: 160px; left: 120px; width: 100px; transform: translateY(-50%);"></div>
                    <div style="position: absolute; top: 125px; left: 160px; font-size: 0.7em; color: #c62828;">CALOR</div>
                    
                    <!-- 2. INTERCAMBIADOR DE CALOR (Caldera) -->
                    <div class="component" style="margin-top: 50px;">
                        <div id="heat-exchanger">
                            <span style="display: block; margin-top: 5px;">VAPOR</span>
                        </div>
                        <span>CALDERA</span>
                    </div>

                    <!-- CA√ëER√çA 2: VAPOR (a la Turbina) -->
                    <div class="pipe-line" id="pipe-steam" style="top: 105px; left: 300px; width: 140px; transform: translateY(-50%);"></div>
                    <div style="position: absolute; top: 80px; left: 330px; font-size: 0.7em; color: #546e7a;">VAPOR ALTA PRES.</div>

                    <!-- 3. TURBINA (Movimiento Mec√°nico) -->
                    <div class="component" style="margin-top: 50px;">
                        <div id="turbine">
                            <div id="turbine-blades" style="animation: spin 0.5s linear infinite;"></div>
                        </div>
                        <span>TURBINA</span>
                    </div>

                    <!-- CA√ëER√çA 3: EJE (A la Generador) -->
                    <div class="pipe-line" id="pipe-shaft" style="top: 130px; left: 520px; width: 40px; background: #333; border: none; height: 5px;"></div>
                    <div style="position: absolute; top: 110px; left: 510px; font-size: 0.7em; color: #333;">EJE</div>

                    <!-- 4. GENERADOR (Generaci√≥n El√©ctrica) -->
                    <div class="component" style="margin-top: 50px;">
                        <div id="generator">
                            ‚ö°
                        </div>
                        <span>GENERADOR</span>
                    </div>

                    <!-- FLUJO DE ELECTRICIDAD -->
                    <div id="electric-flow">
                        ‚ö° Potencia: <span id="nuclear-output">0.00</span> MW
                    </div>
                </div>

                <div class="simulator-control">
                    <label for="control-rods">Posici√≥n de Barras de Control (% Retiradas)</label>
                    <input type="range" id="control-rods" min="10" max="90" value="50" oninput="simulateNuclear(this.value)">
                    <p>Barras Retiradas: <span id="current-rods">50</span>%</p>
                </div>
                
                <div class="simulator-output">
                    Estado Operacional: <span id="nuclear-status">Estable</span>
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN FOTOVOLTAICA --- -->
        <section id="fotovoltaica" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>‚òÄÔ∏è Energ√≠a Fotovoltaica</h2>
            
            <h3>Descripci√≥n Breve</h3>
            <p><strong>Descripci√≥n:</strong> La luz solar (fotones) impacta la c√©lula fotovoltaica, liberando electrones (efecto fotoel√©ctrico) para generar corriente el√©ctrica. La eficiencia depende de la **intensidad solar**.</p>

            <h3>Simulador Interactivo: Irradiaci√≥n Solar</h3>
            <div class="simulator-area" id="simulador-fotovoltaica">
                <p>Simula la intensidad de la luz solar (fotones) que llegan al panel, afectando la producci√≥n el√©ctrica.</p>

                <!-- VISUALIZACI√ìN FOTOVOLTAICA DETALLADA -->
                <div style="width: 350px; height: 180px; background: #424242; border: 4px solid #fbc02d; border-radius: 5px; position: relative; margin-bottom: 20px; overflow: hidden; box-shadow: 5px 5px 15px rgba(0,0,0,0.4);">
                    <div id="solar-rays" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 175px 0px, rgba(255, 255, 0, 0.4) 0%, rgba(255, 255, 0, 0) 60%); opacity: 0.7; transition: opacity 0.5s ease, filter 0.5s ease;"></div>
                    <div id="p1" style="position: absolute; width: 3px; height: 3px; background: yellow; border-radius: 50%; animation: none; opacity: 0; top: 10%; left: 20%;"></div>
                    <div id="p2" style="position: absolute; width: 3px; height: 3px; background: yellow; border-radius: 50%; animation: none; opacity: 0; top: 5%; left: 50%;"></div>
                    <div id="p3" style="position: absolute; width: 3px; height: 3px; background: yellow; border-radius: 50%; animation: none; opacity: 0; top: 15%; left: 80%;"></div>
                    
                    <!-- Dibujo del Panel Fotovoltaico -->
                    <div style="position: absolute; width: 100%; height: 30px; background: rgba(255, 255, 255, 0.3); top: 0; color: white; padding: 5px; font-size: 0.7em;">CUBIERTA DE VIDRIO (Protecci√≥n)</div>
                    <div style="position: absolute; width: 100%; background: #0d47a1; top: 30px; height: 120px; display: flex; flex-wrap: wrap; justify-content: space-around; align-items: center;">
                        <span style="color: white; font-size: 0.8em; opacity: 0.7; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">C√âLULAS DE SILICIO</span>
                    </div>
                    <div style="position: absolute; width: 100%; background: #333; bottom: 0; height: 30px; color: white; padding: 5px; font-size: 0.7em; text-align: right;">BACKSHEET (Aislamiento)</div>

                    <div style="position: absolute; bottom: 5px; left: 5px; color: white; font-weight: bold; font-size: 0.9em;">‚ö° Corriente: <span id="solar-meter">0.00</span> A</div>
                </div>
                
                <div class="simulator-control">
                    <label for="solar-intensity">Intensidad Solar (W/m¬≤)</label>
                    <input type="range" id="solar-intensity" min="0" max="1000" value="700" step="50" oninput="simulateSolar(this.value)">
                    <p>Irradiaci√≥n Actual: <span id="current-intensity">700</span> W/m¬≤</p>
                </div>
                
                <div class="simulator-output">
                    Producci√≥n El√©ctrica Estimada: <span id="solar-output">0.00</span> kWh
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN E√ìLICA --- -->
        <section id="eolica" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üå¨Ô∏è Energ√≠a E√≥lica</h2>
            
            <h3>Descripci√≥n Breve</h3>
            <p><strong>Descripci√≥n:</strong> Aprovecha la energ√≠a cin√©tica del viento. Las palas capturan la energ√≠a, transfiri√©ndola a un generador. La potencia es proporcional al **cubo** de la velocidad del viento, por lo que una peque√±a variaci√≥n hace una gran diferencia.</p>

            <h3>Simulador Interactivo: Velocidad del Viento</h3>
            <div class="simulator-area" id="simulador-eolica">
                <p>Ajusta la velocidad del viento para ver c√≥mo cambia la potencia generada.</p>

                <!-- VISUALIZACI√ìN E√ìLICA DETALLADA -->
                <div style="width: 250px; height: 400px; position: relative; margin-bottom: 20px;">
                    <div style="width: 30px; height: 150px; background: #78909c; position: absolute; bottom: 0; left: 110px; border-radius: 5px;"></div>
                    <div style="width: 60px; height: 40px; background: #546e7a; position: absolute; bottom: 150px; left: 95px; border-radius: 5px;"></div>
                    <div style="width: 15px; height: 15px; background: #37474f; position: absolute; bottom: 160px; left: 118px; border-radius: 50%; z-index: 10;"></div>
                    <div id="turbine-blades-viz" style="position: absolute; bottom: 167px; left: 125px; width: 10px; height: 10px; transform-origin: 0% 50%; transition: transform 0.1s linear;">
                        <div style="position: absolute; width: 100px; height: 20px; background: #90a4ae; transform-origin: 0% 50%; border-radius: 15px; box-shadow: 1px 1px 3px rgba(0,0,0,0.2); transform: rotate(0deg) translateX(-5px);"></div>
                        <div style="position: absolute; width: 100px; height: 20px; background: #90a4ae; transform-origin: 0% 50%; border-radius: 15px; box-shadow: 1px 1px 3px rgba(0,0,0,0.2); transform: rotate(120deg) translateX(-5px);"></div>
                        <div style="position: absolute; width: 100px; height: 20px; background: #90a4ae; transform-origin: 0% 50%; border-radius: 15px; box-shadow: 1px 1px 3px rgba(0,0,0,0.2); transform: rotate(240deg) translateX(-5px);"></div>
                    </div>
                    <div id="wind-flow" style="position: absolute; top: 150px; left: 0; width: 5px; height: 20px; background: rgba(0, 150, 136, 0.5); opacity: 0; transition: all 0.5s ease; animation: none;"></div>
                    <span style="position: absolute; top: 10px; left: 0; color: #009688; font-size: 0.7em; font-weight: bold;">VIENTO</span>
                    <span style="position: absolute; bottom: 10px; left: 105px; color: #546e7a; font-size: 0.7em; font-weight: bold;">TORRE</span>
                </div>
                
                <div class="simulator-control">
                    <label for="wind-speed">Velocidad del Viento (m/s)</label>
                    <input type="range" id="wind-speed" min="0" max="25" value="12" oninput="simulateWind(this.value)">
                    <p>Velocidad Actual: <span id="current-wind">12</span> m/s</p>
                </div>
                
                <div class="simulator-output">
                    Potencia Generada: <span id="wind-output">0.00</span> kW
                </div>
            </div>
        </section>

        <!-- --- SECCI√ìN BIOCOMBUSTIBLES --- -->
        <section id="biocombustibles" class="content-section">
            <button class="back-button" onclick="showSection('matriz');">‚¨ÖÔ∏è Volver a la Matriz</button>
            <h2>üå± Biocombustibles</h2>
            
            <h3>Descripci√≥n Breve</h3>
            <p><strong>Descripci√≥n:</strong> Combustibles l√≠quidos derivados de biomasa (ej. biodi√©sel de aceite de soja). Se usan para mezcla obligatoria (corte) con combustibles f√≥siles. El impacto ambiental es menor porque el CO‚ÇÇ emitido por la quema es parcialmente compensado por el CO‚ÇÇ absorbido por las plantas.</p>

            <h3>Simulador Interactivo: Porcentaje de Mezcla (Blend)</h3>
            <div class="simulator-area" id="simulador-biocombustibles">
                <p>Simula el porcentaje de biocombustible mezclado (Blend) con el combustible f√≥sil tradicional (di√©sel/nafta).</p>

                <!-- VISUALIZACI√ìN BIOCOMBUSTIBLES DETALLADA -->
                <div style="width: 400px; height: 200px; background: #f1f8e9; border: 2px solid #aed581; border-radius: 8px; display: flex; justify-content: space-around; align-items: flex-end; padding: 20px; box-sizing: border-box; margin-bottom: 20px;">
                    <div>
                        <div style="font-size: 3em; line-height: 1; color: #8bc34a; text-align: center;">üåø</div>
                        <div style="text-align: center; font-size: 0.8em; font-weight: bold; margin-top: 5px;">BIOMASA (Soja/Ma√≠z)</div>
                    </div>
                    <div style="font-size: 2em; line-height: 150px;">‚û°Ô∏è</div>
                    <div style="width: 100px; height: 150px; background: #fff; border: 2px solid #8bc34a; border-radius: 5px; position: relative; overflow: hidden; margin-top: 20px;">
                        <div id="fossil-fuel" style="position: absolute; bottom: 0; width: 100%; background: #3e2723; transition: height 0.5s ease; height: 80%;">
                            <span style="position: absolute; bottom: 5px; right: 5px; font-size: 0.7em; color: white;">F√ìSIL</span>
                        </div>
                        <div id="bio-fuel" style="position: absolute; bottom: 0; width: 100%; background: #c5e1a5; transition: height 0.5s ease; height: 20%;">
                            <span style="position: absolute; top: 5px; left: 5px; font-size: 0.7em; color: white;">BIO</span>
                        </div>
                        <div style="text-align: center; font-size: 0.8em; font-weight: bold; margin-top: 5px; color: #3e2723;">TANQUE DE MEZCLA</div>
                    </div>
                    <div style="font-size: 2em; line-height: 150px;">‚û°Ô∏è</div>
                    <div>
                        <div style="font-size: 3em; line-height: 1; color: #8bc34a; text-align: center;">‚õΩ</div>
                        <div style="text-align: center; font-size: 0.8em; font-weight: bold; margin-top: 5px;">COMBUSTIBLE FINAL (B10/E12)</div>
                    </div>
                </div>

                <div class="simulator-control">
                    <label for="blend-percent">Porcentaje de Biodi√©sel (B%)</label>
                    <input type="range" id="blend-percent" min="5" max="20" value="10" step="1" oninput="simulateBio(this.value)">
                    <p>Mezcla Actual: <span id="current-blend">10</span>%</p>
                </div>
                
                <div class="simulator-output">
                    Reducci√≥n Estimada de CO‚ÇÇ: <span id="bio-output">0.00</span> kg/L
                </div>
            </div>
        </section>

    </div>

    <!-- Script para la Navegaci√≥n, Matriz de Datos y Simulaciones -->
    <script>
        // --- 1. DATOS DE LA MATRIZ (INICIO) ---
        // Los porcentajes deben sumar 100%
        const matrizData = [
            { name: "Gas Natural", percentage: 52.0, class: "gas" },
            { name: "Petr√≥leo y Derivados", percentage: 31.0, class: "oil" },
            { name: "Hidroel√©ctrica", percentage: 4.5, class: "hydro" },
            { name: "Nuclear", percentage: 2.5, class: "nuclear" },
            { name: "Otras Renovables", percentage: 8.0, class: "renewable" },
            { name: "Carb√≥n y Otros", percentage: 2.0, class: "oil" }
        ];

        // Datos simulados para el mapa
        const plantData = {
            'Solar Jujuy': {
                type: 'Fotovoltaica',
                province: 'Jujuy',
                production: '300 MW (Estimado)',
                impact: 'Bajo (Emisiones cero)',
                img: 'https://placehold.co/400x150/f8c37e/333333?text=Solar+en+la+Puna',
                details: 'Gran planta de energ√≠a solar en el noroeste, aprovechando la alta radiaci√≥n. Su construcci√≥n impacta el ecosistema de altura, pero genera energ√≠a limpia.'
            },
            'Central Hidro. Mendoza': {
                type: 'Hidroel√©ctrica',
                province: 'Mendoza',
                production: '650 MW (Estimado)',
                impact: 'Medio (Alteraci√≥n de caudales y ecosistema fluvial)',
                img: 'https://placehold.co/400x150/81d4fa/333333?text=Embalse+Mendoza',
                details: 'Central de media potencia que asegura base de energ√≠a y regula el riego agr√≠cola de la provincia.'
            },
            'Parque E√≥lico Chubut': {
                type: 'E√≥lica',
                province: 'Chubut',
                production: '120 MW (Estimado)',
                impact: 'Bajo (Posible impacto en aves, ruido)',
                img: 'https://placehold.co/400x150/b0bec5/333333?text=Turbinas+E√≥licas',
                details: 'Ubicado en la Patagonia, una de las zonas con mayor recurso e√≥lico del pa√≠s. Es fundamental para diversificar la matriz.'
            },
            'Planta Biog√°s BA': {
                type: 'Biog√°s',
                province: 'Buenos Aires',
                production: '5 MW (Estimado)',
                impact: 'Muy Bajo (Aprovecha residuos org√°nicos)',
                img: 'https://placehold.co/400x150/c5e1a5/333333?text=Digestor+de+Biog√°s',
                details: 'Planta peque√±a que genera electricidad a partir de desechos de feedlots. Contribuye a la gesti√≥n de residuos.'
            },
            'Central Nuclear BA': {
                type: 'Nuclear',
                province: 'Buenos Aires',
                production: '750 MW (Estimado)',
                impact: 'Alto/Controlado (Gesti√≥n de residuos radioactivos)',
                img: 'https://placehold.co/400x150/66bb6a/333333?text=Reactor+Nuclear',
                details: 'Fuente de energ√≠a base estable, con desaf√≠os en el manejo seguro de combustible gastado. Es clave para el suministro continuo.'
            },
            'Biocombustibles Santa Fe': {
                type: 'Biocombustibles',
                province: 'Santa Fe',
                production: '200 Toneladas/d√≠a',
                impact: 'Medio (Uso de suelo agr√≠cola)',
                img: 'https://placehold.co/400x150/d7ccc8/333333?text=Planta+de+Biodi√©sel',
                details: 'Ubicada cerca de zonas productoras de soja. Su producci√≥n se destina al corte obligatorio con di√©sel f√≥sil.'
            }
        };

        // --- 2. FUNCI√ìN DE NAVEGACI√ìN ---
        function showSection(sectionId) {
            var sections = document.querySelectorAll('.content-section');
            sections.forEach(function(section) {
                section.classList.remove('active');
            });
            var activeSection = document.getElementById(sectionId);
            if (activeSection) {
                activeSection.classList.add('active');
            }
            // Ocultar info de planta y regi√≥n al cambiar de secci√≥n
            document.getElementById('plant-info-modal').style.display = 'none';
            document.getElementById('region-info-area').style.display = 'none';
            document.getElementById('region-selector').value = ''; 
        }

        // --- 3. FUNCIONES DEL MAPA ---

        // Muestra detalles de la planta al hacer click en el punto
        function showPlantDetails(plantName, province) {
            const data = plantData[plantName];
            const modal = document.getElementById('plant-info-modal');
            const regionArea = document.getElementById('region-info-area');

            // Ocultar info regional y restablecer selector
            regionArea.style.display = 'none';
            document.getElementById('region-selector').value = '';

            if (data) {
                document.getElementById('modal-plant-name').textContent = plantName;
                document.getElementById('modal-plant-type').textContent = data.type;
                document.getElementById('modal-plant-province').textContent = data.province;
                document.getElementById('modal-plant-production').textContent = data.production;
                document.getElementById('modal-plant-impact').textContent = data.impact;
                document.getElementById('modal-plant-image').src = data.img;
                
                modal.style.display = 'block';
            } else {
                modal.style.display = 'none';
            }
        }

        // Muestra informaci√≥n de la regi√≥n seleccionada
        function showRegionInfo(province) {
            const regionArea = document.getElementById('region-info-area');
            const regionName = document.getElementById('region-name');
            const regionDetails = document.getElementById('region-details');
            const plantModal = document.getElementById('plant-info-modal');
            
            // Ocultar info de planta
            plantModal.style.display = 'none';

            if (province === "") {
                regionArea.style.display = 'none';
                return;
            }

            regionName.textContent = province;
            regionDetails.innerHTML = '';
            
            // Simulaci√≥n de datos regionales basados en el tipo de recurso predominante
            const regionalData = {
                'Mendoza': '<strong>Recurso Principal:</strong> Hidr√°ulico y Solar. <strong>Desaf√≠o:</strong> Gesti√≥n h√≠drica y estacionalidad. <strong>Oportunidad:</strong> Alto potencial solar en precordillera.',
                'Chubut': '<strong>Recurso Principal:</strong> E√≥lico. <strong>Desaf√≠o:</strong> Conexi√≥n a la red nacional. <strong>Oportunidad:</strong> Velocidad de viento constante y excepcional.',
                'Buenos Aires': '<strong>Recurso Principal:</strong> Nuclear y Biog√°s. <strong>Desaf√≠o:</strong> Alta demanda de la metr√≥polis. <strong>Oportunidad:</strong> Uso de residuos urbanos y ganaderos para biog√°s.',
                'Santa Fe': '<strong>Recurso Principal:</strong> Biocombustibles. <strong>Desaf√≠o:</strong> Monocultivo de soja. <strong>Oportunidad:</strong> Integraci√≥n de la producci√≥n agr√≠cola a la energ√≠a.',
                'Jujuy': '<strong>Recurso Principal:</strong> Solar. <strong>Desaf√≠o:</strong> Distancia a centros de consumo. <strong>Oportunidad:</strong> Mayor radiaci√≥n solar del pa√≠s.'
            };

            regionDetails.innerHTML = regionalData[province];
            regionArea.style.display = 'block';
        }


        // --- 4. FUNCIONES DE SIMULACI√ìN AVANZADA (JUGANDO) ---

        function simulatePlaySolar() {
            const angle = parseFloat(document.getElementById('solar-angle').value);
            const locationFactor = parseFloat(document.getElementById('solar-location').value) / 100 + 1; // 1.4 a 1.0
            const weatherFactor = parseFloat(document.getElementById('solar-weather').value);
            
            // Simulaci√≥n: Producci√≥n base (1000W) * seno(√°ngulo √≥ptimo) * ubicaci√≥n * clima
            // El √°ngulo √≥ptimo se simula como 45 grados.
            const angleEfficiency = Math.sin((90 - Math.abs(angle - 45)) * Math.PI / 180); 
            
            const maxProduction = 1000 * 5; // 5 kWh de base
            let production = maxProduction * angleEfficiency * locationFactor * weatherFactor / 2;

            production = Math.max(0, Math.min(production, maxProduction)); // Limitar el rango
            
            const output = document.getElementById('play-solar-output');
            output.innerHTML = `Producci√≥n Estimada: <strong>${production.toFixed(2)} kWh/d√≠a</strong>`;
            output.style.backgroundColor = production > 2000 ? '#a5d6a7' : (production > 1000 ? '#ffecb3' : '#ffcdd2');
        }

        function simulatePlayWind() {
            const height = parseFloat(document.getElementById('wind-height').value);
            const typeFactor = parseFloat(document.getElementById('wind-type').value);
            const speed = parseFloat(document.getElementById('wind-speed-play').value);
            
            // La potencia es proporcional a (Velocidad ^ 3) y al √°rea (simulada por Altura)
            const power = typeFactor * (height / 100) * Math.pow(speed, 3) * 0.05; 
            
            const output = document.getElementById('play-wind-output');
            output.innerHTML = `Potencia Estimada: <strong>${power.toFixed(2)} kW</strong>`;
            output.style.backgroundColor = power > 300 ? '#b3e5fc' : (power > 100 ? '#e3f2fd' : '#fff8e1');
        }

        function simulatePlayHome() {
            const genSolar = parseFloat(document.getElementById('gen-solar').value);
            const conEfficiency = parseFloat(document.getElementById('con-efficiency').value);
            const conHabitsFactor = parseFloat(document.getElementById('con-habits').value);

            const baseConsumption = 400; // kWh/mes
            const consumption = (baseConsumption * conEfficiency) + (conHabitsFactor * 100);
            
            const balance = genSolar - consumption;
            
            const output = document.getElementById('play-home-output');
            output.textContent = '';
            
            if (balance > 50) {
                output.innerHTML = `Balance: <strong>${balance.toFixed(0)} kWh</strong> (Super√°vit: ¬°Vendes energ√≠a!)`;
                output.style.backgroundColor = '#a5d6a7';
            } else if (balance >= -50 && balance <= 50) {
                output.innerHTML = `Balance: <strong>${balance.toFixed(0)} kWh</strong> (Neutral: Casi autosuficiente)`;
                output.style.backgroundColor = '#ffecb3';
            } else {
                output.innerHTML = `Balance: <strong>${balance.toFixed(0)} kWh</strong> (D√©ficit: Necesitas m√°s generaci√≥n/ahorro)`;
                output.style.backgroundColor = '#ffcdd2';
            }
        }


        // --- 5. FUNCIONES DE SIMULACI√ìN (Originales) ---

        // SIMULADOR HIDROEL√âCTRICA
        function simulateHydro(level) {
            const outputElement = document.getElementById('hydro-output');
            const levelDisplay = document.getElementById('current-level');
            const waterViz = document.getElementById('water-level');
            const flowViz = document.getElementById('water-flow-indicator');
            const headLineViz = document.getElementById('water-head-line');
            const turbineViz = document.getElementById('turbine-viz');
            
            const basePower = 500; 
            const maxLevel = 90;
            const minLevel = 10;
            const effectiveHead = level - minLevel; 
            let power = 0;
            
            if (effectiveHead > 0) {
                power = basePower * Math.pow(effectiveHead / (maxLevel - minLevel), 2);
            }
            
            levelDisplay.textContent = level;
            outputElement.textContent = power.toFixed(2);

            waterViz.style.height = `${level}%`;
            
            const headLinePos = 250 * ((100 - level) / 100) + 10; 
            headLineViz.style.top = `${250 * ((100 - level) / 100) * 0.9}px`;
            
            if (power > 50) {
                flowViz.style.opacity = 1;
                const rotationSpeed = 1 / (power / 500); 
                turbineViz.style.animation = `spin ${rotationSpeed}s linear infinite`;
            } else {
                flowViz.style.opacity = 0;
                turbineViz.style.animation = 'none';
            }
        }

        // SIMULADOR NUCLEAR (ACTUALIZADO)
        let fissionInterval;
        let turbineRotationInterval;

        function simulateNuclear(rods) {
            const rodsDisplay = document.getElementById('current-rods');
            const rodElements = [
                document.getElementById('rod-1'), 
                document.getElementById('rod-2'), 
                document.getElementById('rod-3')
            ];
            const outputElement = document.getElementById('nuclear-output');
            const statusElement = document.getElementById('nuclear-status');
            const reactivityStatus = document.getElementById('reactivity-status');
            const bladesViz = document.getElementById('turbine-blades');
            const generatorViz = document.getElementById('generator');
            
            rodsDisplay.textContent = rods; 
            
            let status;
            let color;
            let power = 0;
            
            const insertionLevel = 100 - rods; 
            
            // 1. Control de Barras: Se mueven 
            rodElements.forEach(rod => {
                const rodHeight = 150 * (insertionLevel / 100); // 150px es la altura del reactor-viz
                rod.style.height = `${rodHeight}px`; 
                rod.style.transform = `translateY(${150 - rodHeight}px)`;
            });
            
            // 2. C√°lculo de Potencia (simplificado)
            if (rods < 30) {
                status = "Cr√≠tica"; // Exceso de potencia
                color = "red";
                power = 1500; 
                reactivityStatus.textContent = "ALTA";
                reactivityStatus.style.color = color;
                bladesViz.style.animation = `spin 0.2s linear infinite`; // Gira muy r√°pido
            } else if (rods >= 30 && rods <= 70) {
                status = "Estable"; // Potencia nominal
                color = "green";
                power = 1000;
                reactivityStatus.textContent = "NOMINAL";
                reactivityStatus.style.color = color;
                bladesViz.style.animation = `spin 0.5s linear infinite`; // Velocidad normal
            } else {
                status = "Subcr√≠tica"; // Poca o nula potencia
                color = "orange";
                power = 50; 
                reactivityStatus.textContent = "BAJA";
                reactivityStatus.style.color = color;
                bladesViz.style.animation = `spin 4s linear infinite`; // Gira lento
            }

            // 3. Visualizaci√≥n de la Potencia
            outputElement.textContent = power.toFixed(0);
            statusElement.textContent = status;
            statusElement.style.color = color;
            
            // 4. Animaci√≥n de Generador (Efecto visual de parpadeo)
            clearInterval(turbineRotationInterval);
            if (power > 100) {
                generatorViz.style.boxShadow = `0 0 10px 5px ${color}`;
                generatorViz.style.animation = `fission 1s infinite alternate`;
            } else {
                generatorViz.style.boxShadow = 'none';
                generatorViz.style.animation = 'none';
            }
        }


        // SIMULADOR FOTOVOLTAICA
        function simulateSolar(intensity) {
            const outputElement = document.getElementById('solar-output');
            const intensityDisplay = document.getElementById('current-intensity');
            const raysViz = document.getElementById('solar-rays');
            const meterViz = document.getElementById('solar-meter');
            const photonElements = [document.getElementById('p1'), document.getElementById('p2'), document.getElementById('p3')];
            
            const panelArea = 10; 
            const efficiency = 0.18; 
            const power = (intensity / 1000) * panelArea * efficiency * 0.85; 
            
            intensityDisplay.textContent = intensity;
            outputElement.textContent = power.toFixed(2);
            meterViz.textContent = (power * 5).toFixed(2); 

            raysViz.style.opacity = 0.2 + (intensity / 1000) * 0.8;
            raysViz.style.filter = `brightness(${1 + intensity / 1000 * 0.5})`;
            
            const photonSpeed = 1000 / intensity;
            photonElements.forEach((p, index) => {
                if (intensity > 100) {
                    p.style.animation = `photonHit ${photonSpeed}s linear infinite`;
                    p.style.animationDelay = `${index * 0.3}s`;
                    p.style.opacity = 1;
                } else {
                    p.style.animation = 'none';
                    p.style.opacity = 0;
                }
            });
        }

        // SIMULADOR E√ìLICA
        function simulateWind(speed) {
            const outputElement = document.getElementById('wind-output');
            const windDisplay = document.getElementById('current-wind');
            const bladesViz = document.getElementById('turbine-blades-viz');
            const flowViz = document.getElementById('wind-flow');
            
            let power = 0;
            const cutInSpeed = 3; 
            const ratedSpeed = 15; 
            const cutOutSpeed = 25; 
            const maxPower = 3000; 

            if (speed >= cutInSpeed && speed < ratedSpeed) {
                power = maxPower * Math.pow((speed - cutInSpeed) / (ratedSpeed - cutInSpeed), 3);
            } else if (speed >= ratedSpeed && speed < cutOutSpeed) {
                power = maxPower;
            } else if (speed >= cutOutSpeed) {
                power = 0; 
            }
            
            windDisplay.textContent = speed;
            outputElement.textContent = power.toFixed(2);
            
            if (power > 0) {
                const rotationSpeed = 1 / (speed / 10); 
                bladesViz.style.animation = `spin ${rotationSpeed}s linear infinite`;
                flowViz.style.opacity = 1;
                flowViz.style.animation = `windAnimate ${15 / speed}s linear infinite`;
            } else {
                bladesViz.style.animation = 'none';
                flowViz.style.opacity = 0;
                flowViz.style.animation = 'none';
            }
        }

        // SIMULADOR BIOCOMBUSTIBLES
        function simulateBio(blend) {
            const outputElement = document.getElementById('bio-output');
            const blendDisplay = document.getElementById('current-blend');
            const bioFuelViz = document.getElementById('bio-fuel');
            const fossilFuelViz = document.getElementById('fossil-fuel');
            
            const baseFossilCO2 = 2.6; 
            const bioReductionFactor = 0.9; 
            
            const co2Saved = (blend / 100) * baseFossilCO2 * bioReductionFactor;
            
            blendDisplay.textContent = blend;
            outputElement.textContent = co2Saved.toFixed(3);

            const bioHeight = blend; 
            const fossilHeight = 100 - blend; 

            bioFuelViz.style.height = `${bioHeight}%`;
            fossilFuelViz.style.height = `${fossilHeight}%`;

            const labelBio = bioFuelViz.querySelector('span:first-child'); 
            const labelFossil = fossilFuelViz.querySelector('span:first-child');

            // Asegura que las etiquetas est√©n dentro del l√≠quido
            labelBio.style.top = (100 - bioHeight + 5) < 5 ? '5px' : `${100 - bioHeight + 5}%`;
            labelFossil.style.bottom = (100 - fossilHeight + 5) < 5 ? '5px' : `${100 - fossilHeight + 5}%`;
        }


        // 6. INICIAR LA APLICACI√ìN Y SIMULACIONES
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar las simulaciones al cargar la p√°gina
            simulateHydro(document.getElementById('embalse-level').value);
            simulateNuclear(document.getElementById('control-rods').value);
            simulateSolar(document.getElementById('solar-intensity').value);
            simulateWind(document.getElementById('wind-speed').value);
            simulateBio(document.getElementById('blend-percent').value);
            
            // Inicializar simuladores de juego
            simulatePlaySolar();
            simulatePlayWind();
            simulatePlayHome();
        });
    </script>

</body>
</html>
